# Курсовая работа: Часть 2 (Back-End)

## Цель работы

Разработать телеграмм-магазин и бота к нему, в котором можно будет покупать различные предметы.

## Telegram-Bot

https://t.me/KoraSHOP_bot

## Общий стек технологий:

1. ReactJS (v18.0.2)
2. NodeJS (v16.15.1)
3. Хостинги: Netlify (Front-end), Selectel (Back-End)

## Дополнительные библиотеки

1. Node-telegram-bot-api (v0.61.0)
2. Nodemon (v2.0.20)
3. Cores (v2.8.5)
4. Express (v4.18.2)

# Здесь будет Back-End часть

## NodeJS
Node.js добавляет возможность JavaScript взаимодействовать с устройствами ввода-вывода через свой API, написанный на C++, подключать другие внешние библиотеки, написанные на разных языках, обеспечивая вызовы к ним из JavaScript-кода. Node.js применяется преимущественно на сервере, выполняя роль веб-сервера, но есть возможность разрабатывать на Node.js и десктопные оконные приложения.

Используя NodeJS написан сам телеграм-бот.

## `index.js`

В телеграмм-боте есть только один файл - `index.js`, в котором хранится вся логика бота. 

### Подключение библиотек, использование токена и URL-адреса

`const TelegramBot = require('node-telegram-bot-api')` - подключение библиотеки телеграмма.
`const express = require('express')` - подключение express.
`const cors = require('cors')` - подключение Cors.

В переменную `token` мы кладем токен нашего бота.
В `webAppUrl` хранится URL нашего React-приложения.

Через `bot` производится инициализация нашего телеграмм-бота.

---

`bot.on` - включение нашего бота.

В переменную `chatId` помещается id чата с пользователем. Это необходимо чтобы бот знал куда отправлять ответ.
В переменную `text` записывается сообщение, введенное пользователем

Если введенное пользователем сообщение - это команда '/start', то отправляется сообщение с просьбой заполнить данные о месте жительства и вызывается inline-кнопка со ссылкой на магазин. Также есть кнопка, ведущая на приложение магазина, которая находится рядом с полем ввода сообщения.

После заказа отправится сообщение о том, что товар был приобретен, указано на какую сумму, а также указан список товаров, которые были приобретены. 

---

## Хостинг

В качестве хостинга я выбрал Selectel (https://selectel.ru/), и воспользовался их услугой облачного хостинга. 
Бот размещен на Linux Ubuntu 18.04 с установленным Node.js(v16.15.1), npm(v8.11.0), pm2 (v5.2.2).
Файлы бэкенда он берет из моего Git-репозитория (https://github.com/KoraOnEarth/tg-web-app-node)

# Вывод

В ходе данной курсовой работы я изучил JavaScript, познакомился с ReactJS, NodeJS, взаимодействовал с различными библиотеками из npm, научился работать с хостингами и проработал взаимодействие между front-end и back-end составляющими.